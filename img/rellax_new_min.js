!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.Rellax=t()}(this,function(){var e=function(t,o){"use strict";var n=Object.create(e.prototype),r=0,i=0,s=0,a=0,l=[],p=!0,d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},f=window.transformProp||function(){var e=document.createElement("div");if(null===e.style.transform){var t=["Webkit","Moz","ms"];for(var o in t)if(void 0!==e.style[t[o]+"Transform"])return t[o]+"Transform"}return"transform"}();n.options={speed:-2,center:!1,wrapper:null,round:!0,vertical:!0,horizontal:!1,callback:function(){}},o&&Object.keys(o).forEach(function(e){n.options[e]=o[e]}),t||(t=".rellax");var c="string"==typeof t?document.querySelectorAll(t):[t];if(!(c.length>0))throw new Error("The elements you're trying to select don't exist.");if(n.elems=c,n.options.wrapper&&!n.options.wrapper.nodeType){var u=document.querySelector(n.options.wrapper);if(!u)throw new Error("The wrapper you're trying to use don't exist.");n.options.wrapper=u}var m=function(){for(var e=0;e<l.length;e++)n.elems[e].style.cssText=l[e].style;l=[],i=window.innerHeight,a=window.innerWidth,w(),function(){for(var e=0;e<n.elems.length;e++){var t=h(n.elems[e]);l.push(t)}}(),p&&(window.addEventListener("resize",m),p=!1),v()},h=function(e){var t=e.getAttribute("data-rellax-percentage"),o=e.getAttribute("data-rellax-speed"),r=e.getAttribute("data-rellax-zindex")||0,s=e.getAttribute("data-rellax-ypos");s&&(t=1);var l=e.parentElement.clientHeight||e.parentElement.offsetHeight||e.parentElement.scrollHeight,p=0;p=Math.max(i-l,0)/2,e.style.top=-1*p+"px",e.style.bottom=-1*p+"px";var d=n.options.wrapper?n.options.wrapper.scrollTop:window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,f=n.options.vertical&&(t||n.options.center)?d:0,c=n.options.horizontal&&(t||n.options.center)?window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft:0,u=f+e.getBoundingClientRect().top,m=e.clientHeight||e.offsetHeight||e.scrollHeight,h=c+e.getBoundingClientRect().left,w=e.clientWidth||e.offsetWidth||e.scrollWidth,y=t||(f-u+i)/(m+i),v=t||(c-h+a)/(w+a);n.options.center&&(v=.5,y=.5);var x=o||n.options.speed,b=g(v,y,x),Y=e.style.cssText,T="";if(Y.indexOf("transform")>=0){var E=Y.indexOf("transform"),z=Y.slice(E),A=z.indexOf(";");T=A?" "+z.slice(11,A).replace(/\s/g,""):" "+z.slice(11).replace(/\s/g,"")}return{baseX:b.x,baseY:b.y,top:u,left:h,height:m,width:w,speed:x,style:Y,transform:T,zindex:r,dataYpos:s,diffY:p,parentHeight:l}},w=function(){var e=r,t=s;return r=n.options.wrapper?n.options.wrapper.scrollTop:(document.documentElement||document.body.parentNode||document.body).scrollTop||window.pageYOffset,s=n.options.wrapper?n.options.wrapper.scrollLeft:(document.documentElement||document.body.parentNode||document.body).scrollLeft||window.pageXOffset,!(e==r||!n.options.vertical)||!(t==s||!n.options.horizontal)},g=function(e,t,o){var r={},i=o*(100*(1-e)),s=o*(100*(1-t));return r.x=n.options.round?Math.round(i):Math.round(100*i)/100,r.y=n.options.round?Math.round(s):Math.round(100*s)/100,r},y=function(){w()&&!1===p&&v(),d(y)},v=function(){for(var e,t=0;t<n.elems.length;t++){if(l[t].dataYpos?l[t].top=n.elems[t].parentElement.offsetTop:l[t].top=n.elems[t].offsetTop,l[t].dataYpos){if("top"==l[t].dataYpos)var o=(r-l[t].top+l[t].height+i)/(l[t].height+i);else if("center"==l[t].dataYpos)o=(2*(r-l[t].top)+(i+l[t].height-l[t].parentHeight)+i)/(l[t].height+i);else if("bottom"==l[t].dataYpos)o=(r-l[t].top+(i+l[t].height-l[t].parentHeight)+i)/(l[t].height+i)}else o=(r-l[t].top+i)/(l[t].height+i);var p=(s-l[t].left+a)/(l[t].width+a);if(e=g(p,o,l[t].speed),l[t].dataYpos){if("top"==l[t].dataYpos)var d=e.y-l[t].baseY+l[t].diffY;else if("center"==l[t].dataYpos)d=e.y-l[t].baseY;else if("bottom"==l[t].dataYpos)d=e.y-l[t].baseY-l[t].diffY}else d=e.y-l[t].baseY;var c=e.x-l[t].baseX,u=l[t].zindex,m="translate3d("+(n.options.horizontal?c:"0")+"px,"+(n.options.vertical?d:"0")+"px,"+u+"px) "+l[t].transform;n.elems[t].style[f]=m}n.options.callback(e)};return n.destroy=function(){for(var e=0;e<n.elems.length;e++)n.elems[e].style.cssText=l[e].style;p||(window.removeEventListener("resize",m),p=!0)},m(),y(),n.refresh=m,n};return e});